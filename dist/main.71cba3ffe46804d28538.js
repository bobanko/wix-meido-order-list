(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{146:function(e,s,r){var t={"./af":10,"./af.js":10,"./ar":11,"./ar-dz":12,"./ar-dz.js":12,"./ar-kw":13,"./ar-kw.js":13,"./ar-ly":14,"./ar-ly.js":14,"./ar-ma":15,"./ar-ma.js":15,"./ar-sa":16,"./ar-sa.js":16,"./ar-tn":17,"./ar-tn.js":17,"./ar.js":11,"./az":18,"./az.js":18,"./be":19,"./be.js":19,"./bg":20,"./bg.js":20,"./bm":21,"./bm.js":21,"./bn":22,"./bn.js":22,"./bo":23,"./bo.js":23,"./br":24,"./br.js":24,"./bs":25,"./bs.js":25,"./ca":26,"./ca.js":26,"./cs":27,"./cs.js":27,"./cv":28,"./cv.js":28,"./cy":29,"./cy.js":29,"./da":30,"./da.js":30,"./de":31,"./de-at":32,"./de-at.js":32,"./de-ch":33,"./de-ch.js":33,"./de.js":31,"./dv":34,"./dv.js":34,"./el":35,"./el.js":35,"./en-au":36,"./en-au.js":36,"./en-ca":37,"./en-ca.js":37,"./en-gb":38,"./en-gb.js":38,"./en-ie":39,"./en-ie.js":39,"./en-il":40,"./en-il.js":40,"./en-nz":41,"./en-nz.js":41,"./eo":42,"./eo.js":42,"./es":43,"./es-do":44,"./es-do.js":44,"./es-us":45,"./es-us.js":45,"./es.js":43,"./et":46,"./et.js":46,"./eu":47,"./eu.js":47,"./fa":48,"./fa.js":48,"./fi":49,"./fi.js":49,"./fo":50,"./fo.js":50,"./fr":51,"./fr-ca":52,"./fr-ca.js":52,"./fr-ch":53,"./fr-ch.js":53,"./fr.js":51,"./fy":54,"./fy.js":54,"./gd":55,"./gd.js":55,"./gl":56,"./gl.js":56,"./gom-latn":57,"./gom-latn.js":57,"./gu":58,"./gu.js":58,"./he":59,"./he.js":59,"./hi":60,"./hi.js":60,"./hr":61,"./hr.js":61,"./hu":62,"./hu.js":62,"./hy-am":63,"./hy-am.js":63,"./id":64,"./id.js":64,"./is":65,"./is.js":65,"./it":66,"./it.js":66,"./ja":67,"./ja.js":67,"./jv":68,"./jv.js":68,"./ka":69,"./ka.js":69,"./kk":70,"./kk.js":70,"./km":71,"./km.js":71,"./kn":72,"./kn.js":72,"./ko":73,"./ko.js":73,"./ky":74,"./ky.js":74,"./lb":75,"./lb.js":75,"./lo":76,"./lo.js":76,"./lt":77,"./lt.js":77,"./lv":78,"./lv.js":78,"./me":79,"./me.js":79,"./mi":80,"./mi.js":80,"./mk":81,"./mk.js":81,"./ml":82,"./ml.js":82,"./mn":83,"./mn.js":83,"./mr":84,"./mr.js":84,"./ms":85,"./ms-my":86,"./ms-my.js":86,"./ms.js":85,"./mt":87,"./mt.js":87,"./my":88,"./my.js":88,"./nb":89,"./nb.js":89,"./ne":90,"./ne.js":90,"./nl":91,"./nl-be":92,"./nl-be.js":92,"./nl.js":91,"./nn":93,"./nn.js":93,"./pa-in":94,"./pa-in.js":94,"./pl":95,"./pl.js":95,"./pt":96,"./pt-br":97,"./pt-br.js":97,"./pt.js":96,"./ro":98,"./ro.js":98,"./ru":99,"./ru.js":99,"./sd":100,"./sd.js":100,"./se":101,"./se.js":101,"./si":102,"./si.js":102,"./sk":103,"./sk.js":103,"./sl":104,"./sl.js":104,"./sq":105,"./sq.js":105,"./sr":106,"./sr-cyrl":107,"./sr-cyrl.js":107,"./sr.js":106,"./ss":108,"./ss.js":108,"./sv":109,"./sv.js":109,"./sw":110,"./sw.js":110,"./ta":111,"./ta.js":111,"./te":112,"./te.js":112,"./tet":113,"./tet.js":113,"./tg":114,"./tg.js":114,"./th":115,"./th.js":115,"./tl-ph":116,"./tl-ph.js":116,"./tlh":117,"./tlh.js":117,"./tr":118,"./tr.js":118,"./tzl":119,"./tzl.js":119,"./tzm":120,"./tzm-latn":121,"./tzm-latn.js":121,"./tzm.js":120,"./ug-cn":122,"./ug-cn.js":122,"./uk":123,"./uk.js":123,"./ur":124,"./ur.js":124,"./uz":125,"./uz-latn":126,"./uz-latn.js":126,"./uz.js":125,"./vi":127,"./vi.js":127,"./x-pseudo":128,"./x-pseudo.js":128,"./yo":129,"./yo.js":129,"./zh-cn":130,"./zh-cn.js":130,"./zh-hk":131,"./zh-hk.js":131,"./zh-tw":132,"./zh-tw.js":132};function n(e){var s=a(e);return r(s)}function a(e){var s=t[e];if(!(s+1)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return s}n.keys=function(){return Object.keys(t)},n.resolve=a,e.exports=n,n.id=146},147:function(e,s,r){"use strict";r.r(s);var t=r(1),n=r(133),a=r(4),o=r(3),c=r(137);const{version:l}=r(9),d=e=>s=>(s((e=>({type:"REQUEST_ORDERS",params:e}))(e)),fetch(`/orders/${e}`).then(e=>{return e.headers.get("version")!==l&&window.location.reload(),e}).then(e=>e.json()).then(e=>s((e=>({type:"RECEIVE_ORDERS",workers:e,receivedAt:Date.now()}))(e)),e=>s((e=>({type:"RECEIVE_ERROR",error:e,receivedAt:Date.now()}))(e))));var i=(e={isLoading:!1,workers:[]},s)=>{switch(s.type){case"REQUEST_ORDERS":return Object.assign({},e,{isLoading:!0});case"RECEIVE_ORDERS":return Object.assign({},e,{isLoading:!1,workers:s.workers,error:null,lastUpdated:s.receivedAt});case"RECEIVE_ERROR":return Object.assign({},e,{isLoading:!1,error:s.error,lastUpdated:s.receivedAt});default:return e}},j=r(0);r(148);class m extends t.Component{constructor(e){super(e);const{worker:s}=this.props;this.nameAbbr=this.getAbbr(s.name)}componentDidMount(){this.avatarEl.style.setProperty("--color",this.getAvatarColor(this.nameAbbr))}getAbbr(e){const[,s,r]=e.match(/(\w)\w+[\W](\w)\w+/);return`${s}${r}`.toLowerCase()}getAvatarColor(e){const s=e.charCodeAt(0);e.charCodeAt(1);return`hsl(${(s-97)/25*360},100%,40%)`}render(){const{worker:e}=this.props;return t.createElement("div",{className:"worker fl-row"},t.createElement("div",{className:"av",ref:e=>this.avatarEl=e},this.nameAbbr),t.createElement("div",{className:"fl-col"},t.createElement("div",{className:"worker__title"},t.createElement("div",{className:"worker__name"},e.name)),t.createElement("div",{className:"order"},t.createElement("div",{className:"order__name"},e.order.title))))}}const{version:p}=r(9),u=6e5;var h=Object(o.b)(e=>{const{workers:s,isLoading:r,lastUpdated:t,error:n}=e;return{workers:s,lastUpdated:t,isLoading:r,error:n}},e=>({fetchWorkers:s=>e(d(s))}))(class extends t.Component{componentDidMount(){const e=()=>this.props.fetchWorkers(location.search);e(),setInterval(e,u)}render(){const e=j(this.props.lastUpdated).format("ddd, MMM-D'YY HH:mm:ss"),{error:s}=this.props;return t.createElement("div",{className:"app-info"},t.createElement("div",null,"last update: ",e," "),t.createElement("div",null,"status:",s?t.createElement("span",{style:{color:"red"}},s.message,"ðŸ’”"):t.createElement("span",{style:{color:"limegreen"}},"onlineðŸ’š")),t.createElement("div",null,"ver. ",p))}});r(150);class v extends t.Component{render(){return t.createElement("div",{className:["progress",this.props.isLoading&&"is-loading"].join(" ")},t.createElement("div",{className:"progress__track"}),t.createElement("div",{className:"progress__indicator"}))}}r(151);var b=Object(o.b)(e=>{const{workers:s,isLoading:r,error:t}=e;return{workers:s,isLoading:r,error:t}})(class extends t.Component{constructor(e){super(e)}render(){const{workers:e,isLoading:s,error:r}=this.props,n=j().format("dddd, MMMM Do, YYYY");return t.createElement("div",null,t.createElement(v,{isLoading:s}),t.createElement(h,null),t.createElement("h1",null,"Orders for ",n),t.createElement("div",{className:"workers"},e.map((e,s)=>t.createElement(m,{key:s,worker:e})),!s&&0===e.length&&t.createElement("h2",null,"No orders")))}});const k=Object(a.c)(i,Object(a.a)(c.a));n.render(t.createElement(o.a,{store:k},t.createElement(b,null)),document.getElementById("root"))},148:function(e,s){},150:function(e,s){},151:function(e,s){},9:function(e){e.exports={name:"meido-orders",version:"1.0.4",private:!0,engines:{node:"8.9.4"},scripts:{start:"node server",dev:"webpack --watch",devserver:"webpack-dev-server --mode development --open",build:"webpack --mode production",release:"npm run build && git add -A dist && npm version patch -f"},repository:{type:"git",url:"git+https://github.com/bobanko/wix-meido-order-list.git"},devDependencies:{"awesome-typescript-loader":"^5.2.1","clean-webpack-plugin":"^0.1.19","copy-webpack-plugin":"^4.5.2","css-loader":"^1.0.0","extract-text-webpack-plugin":"^4.0.0-beta.0","file-loader":"^2.0.0","html-webpack-plugin":"^3.2.0","node-sass":"^4.9.3",path:"^0.12.7","redux-devtools":"^3.4.1","sass-loader":"^7.1.0","source-map-loader":"^0.2.4","ts-loader":"^5.0.0",typescript:"^3.0.3",webpack:"^4.19.1","webpack-cli":"^3.1.1","webpack-dev-server":"^3.1.7"},dependencies:{"@types/lodash":"^4.14.110","@types/react":"^16.4.13","@types/react-dom":"^16.0.7",express:"^3.1.2",lodash:"^4.17.11",moment:"^2.22.2",npm:"^6.4.1",react:"^16.5.0","react-dom":"^16.5.0","react-redux":"^5.0.7",redux:"^4.0.0","redux-logger":"^3.0.6","redux-thunk":"^2.3.0",request:"^2.88.0"}}}},[[147,2,1]]]);
//# sourceMappingURL=main.71cba3ffe46804d28538.js.map