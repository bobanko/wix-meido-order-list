(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e){e.exports=JSON.parse('{"name":"meido-orders","version":"1.0.20","private":true,"engines":{"node":"8.9.4"},"scripts":{"start":"npm run server","dev":"npm run server & npm run frontend","frontend":"webpack-dev-server --mode development --open","server":"node server","build":"webpack --mode production","release":"npm version patch -f && npm run build && git add -A dist && git commit --amend --no-edit"},"repository":{"type":"git","url":"git+https://github.com/bobanko/wix-meido-order-list.git"},"devDependencies":{"awesome-typescript-loader":"^5.2.1","clean-webpack-plugin":"^0.1.19","copy-webpack-plugin":"^4.6.0","css-loader":"^1.0.0","extract-text-webpack-plugin":"^4.0.0-beta.0","file-loader":"^2.0.0","html-webpack-plugin":"^3.2.0","node-sass":"^4.9.3","path":"^0.12.7","redux-devtools":"^3.4.1","sass-loader":"^7.1.0","source-map-loader":"^0.2.4","ts-loader":"^5.0.0","typescript":"^3.0.3","webpack":"^4.19.1","webpack-cli":"^3.1.1","webpack-dev-server":"^3.1.7","zip-a-folder":"0.0.8"},"dependencies":{"@types/lodash":"^4.14.110","@types/react":"^16.4.13","@types/react-dom":"^16.0.7","classnames":"^2.2.6","express":"^4.17.1","lodash":"^4.17.11","moment":"^2.22.2","npm":"^6.4.1","react":"^16.5.0","react-dom":"^16.5.0","react-redux":"^5.0.7","redux":"^4.0.0","redux-logger":"^3.0.6","redux-thunk":"^2.3.0","request":"^2.88.0"}}')},154:function(e,s,t){var r={"./af":15,"./af.js":15,"./ar":16,"./ar-dz":17,"./ar-dz.js":17,"./ar-kw":18,"./ar-kw.js":18,"./ar-ly":19,"./ar-ly.js":19,"./ar-ma":20,"./ar-ma.js":20,"./ar-sa":21,"./ar-sa.js":21,"./ar-tn":22,"./ar-tn.js":22,"./ar.js":16,"./az":23,"./az.js":23,"./be":24,"./be.js":24,"./bg":25,"./bg.js":25,"./bm":26,"./bm.js":26,"./bn":27,"./bn.js":27,"./bo":28,"./bo.js":28,"./br":29,"./br.js":29,"./bs":30,"./bs.js":30,"./ca":31,"./ca.js":31,"./cs":32,"./cs.js":32,"./cv":33,"./cv.js":33,"./cy":34,"./cy.js":34,"./da":35,"./da.js":35,"./de":36,"./de-at":37,"./de-at.js":37,"./de-ch":38,"./de-ch.js":38,"./de.js":36,"./dv":39,"./dv.js":39,"./el":40,"./el.js":40,"./en-SG":41,"./en-SG.js":41,"./en-au":42,"./en-au.js":42,"./en-ca":43,"./en-ca.js":43,"./en-gb":44,"./en-gb.js":44,"./en-ie":45,"./en-ie.js":45,"./en-il":46,"./en-il.js":46,"./en-nz":47,"./en-nz.js":47,"./eo":48,"./eo.js":48,"./es":49,"./es-do":50,"./es-do.js":50,"./es-us":51,"./es-us.js":51,"./es.js":49,"./et":52,"./et.js":52,"./eu":53,"./eu.js":53,"./fa":54,"./fa.js":54,"./fi":55,"./fi.js":55,"./fo":56,"./fo.js":56,"./fr":57,"./fr-ca":58,"./fr-ca.js":58,"./fr-ch":59,"./fr-ch.js":59,"./fr.js":57,"./fy":60,"./fy.js":60,"./ga":61,"./ga.js":61,"./gd":62,"./gd.js":62,"./gl":63,"./gl.js":63,"./gom-latn":64,"./gom-latn.js":64,"./gu":65,"./gu.js":65,"./he":66,"./he.js":66,"./hi":67,"./hi.js":67,"./hr":68,"./hr.js":68,"./hu":69,"./hu.js":69,"./hy-am":70,"./hy-am.js":70,"./id":71,"./id.js":71,"./is":72,"./is.js":72,"./it":73,"./it-ch":74,"./it-ch.js":74,"./it.js":73,"./ja":75,"./ja.js":75,"./jv":76,"./jv.js":76,"./ka":77,"./ka.js":77,"./kk":78,"./kk.js":78,"./km":79,"./km.js":79,"./kn":80,"./kn.js":80,"./ko":81,"./ko.js":81,"./ku":82,"./ku.js":82,"./ky":83,"./ky.js":83,"./lb":84,"./lb.js":84,"./lo":85,"./lo.js":85,"./lt":86,"./lt.js":86,"./lv":87,"./lv.js":87,"./me":88,"./me.js":88,"./mi":89,"./mi.js":89,"./mk":90,"./mk.js":90,"./ml":91,"./ml.js":91,"./mn":92,"./mn.js":92,"./mr":93,"./mr.js":93,"./ms":94,"./ms-my":95,"./ms-my.js":95,"./ms.js":94,"./mt":96,"./mt.js":96,"./my":97,"./my.js":97,"./nb":98,"./nb.js":98,"./ne":99,"./ne.js":99,"./nl":100,"./nl-be":101,"./nl-be.js":101,"./nl.js":100,"./nn":102,"./nn.js":102,"./pa-in":103,"./pa-in.js":103,"./pl":104,"./pl.js":104,"./pt":105,"./pt-br":106,"./pt-br.js":106,"./pt.js":105,"./ro":107,"./ro.js":107,"./ru":108,"./ru.js":108,"./sd":109,"./sd.js":109,"./se":110,"./se.js":110,"./si":111,"./si.js":111,"./sk":112,"./sk.js":112,"./sl":113,"./sl.js":113,"./sq":114,"./sq.js":114,"./sr":115,"./sr-cyrl":116,"./sr-cyrl.js":116,"./sr.js":115,"./ss":117,"./ss.js":117,"./sv":118,"./sv.js":118,"./sw":119,"./sw.js":119,"./ta":120,"./ta.js":120,"./te":121,"./te.js":121,"./tet":122,"./tet.js":122,"./tg":123,"./tg.js":123,"./th":124,"./th.js":124,"./tl-ph":125,"./tl-ph.js":125,"./tlh":126,"./tlh.js":126,"./tr":127,"./tr.js":127,"./tzl":128,"./tzl.js":128,"./tzm":129,"./tzm-latn":130,"./tzm-latn.js":130,"./tzm.js":129,"./ug-cn":131,"./ug-cn.js":131,"./uk":132,"./uk.js":132,"./ur":133,"./ur.js":133,"./uz":134,"./uz-latn":135,"./uz-latn.js":135,"./uz.js":134,"./vi":136,"./vi.js":136,"./x-pseudo":137,"./x-pseudo.js":137,"./yo":138,"./yo.js":138,"./zh-cn":139,"./zh-cn.js":139,"./zh-hk":140,"./zh-hk.js":140,"./zh-tw":141,"./zh-tw.js":141};function a(e){var s=n(e);return t(s)}function n(e){if(!t.o(r,e)){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=n,e.exports=a,a.id=154},155:function(e,s){e.exports={users:[["Andrey Listochkin","🧔🏼"],["Dmytro Naumenko","🦄"],["Yurii But","🦐"],["Nadiia Davydiuk","🌸"],["Kostiantyn Ovsepian","🤓"],["Volodymyr Kaliuzhnyi","🤘"],["Anna Bilyavskaya","🌺"],["[meido] server error","💩"]]}},156:function(e,s,t){"use strict";t.r(s);var r=t(1),a=t(142),n=t(4),o=t(3),l=t(145);const{version:c}=t(13),i=e=>s=>(s((e=>({type:"REQUEST_ORDERS",params:e}))(e)),fetch(`api/orders/${e}`).then(e=>{return e.headers.get("version")!==c&&setTimeout(()=>window.location.reload(),6e4),e}).then(e=>e.json()).then(e=>s((e=>({type:"RECEIVE_ORDERS",workers:e,receivedAt:Date.now()}))(e)),e=>s((e=>({type:"RECEIVE_ERROR",error:e,receivedAt:Date.now()}))(e))));var d=(e={isLoading:!1,workers:[]},s)=>{switch(s.type){case"REQUEST_ORDERS":return Object.assign({},e,{isLoading:!0});case"RECEIVE_ORDERS":return Object.assign({},e,{isLoading:!1,workers:s.workers,error:null,lastUpdated:s.receivedAt});case"RECEIVE_ERROR":return Object.assign({},e,{isLoading:!1,error:s.error,lastUpdated:s.receivedAt});default:return e}},m=t(0),j=t(5),u=t.n(j),p=(t(157),t(6));const h=["🧙‍♂️","💀","😈","👹","🤡","👻","👽","🤖","🎃","🧛🏻‍♂️","🧛🏻‍♀️","🧟‍♂️","🧟‍♀️","🧚‍♀️","🧚‍♂️","👣","👰🏿","🐸","🕷","🦇","🐍","🍄","🌚","⚰️","🎈","🔪","🧹","🕯","🖤","🕸","🧜‍♀️","🧜‍♂️","👼🏽"],v=()=>Object(p.sample)(h),{users:b}=t(155),k=new Map(b);class f extends r.Component{constructor(e){super(e)}getAbbr(e){const s=/(\w)\w*[\W]+(\w)\w*/;try{const[,t,r]=e.match(s);return`${t}${r}`.toLowerCase()}catch(s){return console.warn("wrong string format",e),"--"}}getAvatarColor(e){const s=e.charCodeAt(0);e.charCodeAt(1);return`hsl(${(s-97)/25*360},100%,40%)`}render(){const{worker:e}=this.props,s=(t=e.name,k.get(t),v());var t;const a=this.getAbbr(e.name),n=e=>{e&&e.style.setProperty("--color",this.getAvatarColor(a))};return r.createElement("div",{className:"worker fl-row"},r.createElement("div",{className:u()("avatar",{emoji:!!s,abbr:!s}),ref:e=>n(e)},s||a),r.createElement("div",{className:"fl-col"},r.createElement("div",{className:"worker__title"},r.createElement("div",{className:"worker__name"},e.name)),r.createElement("div",{className:"order"},r.createElement("div",{className:"order__name"},e.order.title))))}}const{version:g}=t(13),w=600,E=1e3*w;var y=Object(o.b)(e=>{const{workers:s,isLoading:t,lastUpdated:r,error:a}=e;return{workers:s,lastUpdated:r,isLoading:t,error:a}},e=>({fetchWorkers:s=>e(i(s))}))(class extends r.Component{constructor(){super(...arguments),this.state={timeLeft:w},this.update=()=>{this.setState(()=>({timeLeft:w})),this.props.fetchWorkers(location.search)}}componentDidMount(){this.update(),setInterval(()=>{this.setState(e=>({timeLeft:e.timeLeft-1}))},1e3),setInterval(this.update,E)}render(){const{error:e,lastUpdated:s}=this.props,t=m(s).format("ddd, MMM-D'YY HH:mm:ss");return r.createElement("div",{className:"app-info"},r.createElement("div",{className:"banner"},"🐞Issues? ",r.createElement("a",{href:"http://t.me/bobanko"},"http://t.me/bobanko")),r.createElement("div",{className:"update-info"},"last update: ",t),r.createElement("div",null,r.createElement("span",{className:"version"},"ver. ",g,", "),r.createElement("span",{className:"status"},"status:",e?r.createElement("span",{style:{color:"red"}},e.message,"💔"):r.createElement("span",{style:{color:"limegreen"}},"online💚"))))}});t(159);class z extends r.Component{render(){return r.createElement("div",{className:u()("loader-linear",{"is-loading":this.props.isLoading})},r.createElement("div",{className:"loader-linear__track"}),r.createElement("div",{className:"loader-linear__indicator"}))}}const N=["🍏","🍎","🍐","🍊","🍋","🍌","🍉","🍇","🍓","🍈","🍒","🍑","🍍","🥥","🥝","🍅","🍆","🥑","🥦","🥒","🌶️","🌽","🥕","🥔","🥐","🍞","🥖","🥨","🧀","🥚","🍳","🥞","🥓","🥩","🍗","🍖","🌭","🍔","🍟","🍕","🥪","🥙","🌮","🌯","🥗","🥘","🥫","🍝","🍜","🍲","🍛","🍣","🥟","🍤","🍚","🍦","🥧","🍰","🎂","🍮","🍭","🍫","🍿","🍩","🍪","🌰","🥜","🍯","☕️","🍵","🍺","🥣","🥡"],O=()=>Object(p.sample)(N);t(160);var R=t(8);t(161);function x(e){window.location.href=window.location.origin+`/?hash=${e}`}function L(){const e=new URL(location.href).searchParams.get("hash");e||x(R.defaultHash);const s=[...R.floors.values()].includes(e);return r.createElement("label",{className:"floor-selector"},r.createElement("span",null,"Floor"),r.createElement("select",{name:"floor",onChange:function(e){x(e.target.value)},value:s?e:""},r.createElement("option",{value:"",disabled:!0},"?"),[...R.floors].map(([e,s])=>r.createElement("option",{key:s,value:s},e))))}var _=Object(o.b)(e=>{const{workers:s,isLoading:t,error:r}=e;return{workers:s,isLoading:t,error:r}})(class extends r.Component{constructor(e){super(e)}render(){const{workers:e,isLoading:s,error:t}=this.props,a=m().format("dddd, MMMM Do, YYYY");return r.createElement("div",null,r.createElement(z,{isLoading:s}),r.createElement(y,null),r.createElement("h1",null,r.createElement(L,null),`Orders ${O()} ${a}`),r.createElement("div",{className:"workers"},e.map((e,s)=>r.createElement(f,{key:s,worker:e})),!s&&0===e.length&&r.createElement("h2",null,"No orders")))}});const C=Object(n.c)(d,Object(n.a)(l.a));a.render(r.createElement(o.a,{store:C},r.createElement(_,null)),document.getElementById("root"))},157:function(e,s){},159:function(e,s){},160:function(e,s){},161:function(e,s){},8:function(e,s){const t=new Map([[4,"wjdj1412sdasf"],[5,"wjdj1410sdadd"],[6,"12evsadba2f"],[8,"bas45143568e"]]);e.exports={serverUrl:"https://analytics.getmeido.com/media/json?hash=",defaultHash:t.get(4),floors:t}}},[[156,1,2]]]);
//# sourceMappingURL=main.6e7ed85d63be1adb0509.js.map