(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e){e.exports=JSON.parse('{"name":"meido-orders","version":"1.0.19","private":true,"engines":{"node":"8.9.4"},"scripts":{"start":"npm run server","dev":"npm run server & npm run frontend","frontend":"webpack-dev-server --mode development --open","server":"node server","build":"webpack --mode production","release":"npm version patch -f && npm run build && git add -A dist && git commit --amend --no-edit"},"repository":{"type":"git","url":"git+https://github.com/bobanko/wix-meido-order-list.git"},"devDependencies":{"awesome-typescript-loader":"^5.2.1","clean-webpack-plugin":"^0.1.19","copy-webpack-plugin":"^4.6.0","css-loader":"^1.0.0","extract-text-webpack-plugin":"^4.0.0-beta.0","file-loader":"^2.0.0","html-webpack-plugin":"^3.2.0","node-sass":"^4.9.3","path":"^0.12.7","redux-devtools":"^3.4.1","sass-loader":"^7.1.0","source-map-loader":"^0.2.4","ts-loader":"^5.0.0","typescript":"^3.0.3","webpack":"^4.19.1","webpack-cli":"^3.1.1","webpack-dev-server":"^3.1.7","zip-a-folder":"0.0.8"},"dependencies":{"@types/lodash":"^4.14.110","@types/react":"^16.4.13","@types/react-dom":"^16.0.7","classnames":"^2.2.6","express":"^4.17.1","lodash":"^4.17.11","moment":"^2.22.2","npm":"^6.4.1","react":"^16.5.0","react-dom":"^16.5.0","react-redux":"^5.0.7","redux":"^4.0.0","redux-logger":"^3.0.6","redux-thunk":"^2.3.0","request":"^2.88.0"}}')},154:function(e,s,t){var r={"./af":14,"./af.js":14,"./ar":15,"./ar-dz":16,"./ar-dz.js":16,"./ar-kw":17,"./ar-kw.js":17,"./ar-ly":18,"./ar-ly.js":18,"./ar-ma":19,"./ar-ma.js":19,"./ar-sa":20,"./ar-sa.js":20,"./ar-tn":21,"./ar-tn.js":21,"./ar.js":15,"./az":22,"./az.js":22,"./be":23,"./be.js":23,"./bg":24,"./bg.js":24,"./bm":25,"./bm.js":25,"./bn":26,"./bn.js":26,"./bo":27,"./bo.js":27,"./br":28,"./br.js":28,"./bs":29,"./bs.js":29,"./ca":30,"./ca.js":30,"./cs":31,"./cs.js":31,"./cv":32,"./cv.js":32,"./cy":33,"./cy.js":33,"./da":34,"./da.js":34,"./de":35,"./de-at":36,"./de-at.js":36,"./de-ch":37,"./de-ch.js":37,"./de.js":35,"./dv":38,"./dv.js":38,"./el":39,"./el.js":39,"./en-SG":40,"./en-SG.js":40,"./en-au":41,"./en-au.js":41,"./en-ca":42,"./en-ca.js":42,"./en-gb":43,"./en-gb.js":43,"./en-ie":44,"./en-ie.js":44,"./en-il":45,"./en-il.js":45,"./en-nz":46,"./en-nz.js":46,"./eo":47,"./eo.js":47,"./es":48,"./es-do":49,"./es-do.js":49,"./es-us":50,"./es-us.js":50,"./es.js":48,"./et":51,"./et.js":51,"./eu":52,"./eu.js":52,"./fa":53,"./fa.js":53,"./fi":54,"./fi.js":54,"./fo":55,"./fo.js":55,"./fr":56,"./fr-ca":57,"./fr-ca.js":57,"./fr-ch":58,"./fr-ch.js":58,"./fr.js":56,"./fy":59,"./fy.js":59,"./ga":60,"./ga.js":60,"./gd":61,"./gd.js":61,"./gl":62,"./gl.js":62,"./gom-latn":63,"./gom-latn.js":63,"./gu":64,"./gu.js":64,"./he":65,"./he.js":65,"./hi":66,"./hi.js":66,"./hr":67,"./hr.js":67,"./hu":68,"./hu.js":68,"./hy-am":69,"./hy-am.js":69,"./id":70,"./id.js":70,"./is":71,"./is.js":71,"./it":72,"./it-ch":73,"./it-ch.js":73,"./it.js":72,"./ja":74,"./ja.js":74,"./jv":75,"./jv.js":75,"./ka":76,"./ka.js":76,"./kk":77,"./kk.js":77,"./km":78,"./km.js":78,"./kn":79,"./kn.js":79,"./ko":80,"./ko.js":80,"./ku":81,"./ku.js":81,"./ky":82,"./ky.js":82,"./lb":83,"./lb.js":83,"./lo":84,"./lo.js":84,"./lt":85,"./lt.js":85,"./lv":86,"./lv.js":86,"./me":87,"./me.js":87,"./mi":88,"./mi.js":88,"./mk":89,"./mk.js":89,"./ml":90,"./ml.js":90,"./mn":91,"./mn.js":91,"./mr":92,"./mr.js":92,"./ms":93,"./ms-my":94,"./ms-my.js":94,"./ms.js":93,"./mt":95,"./mt.js":95,"./my":96,"./my.js":96,"./nb":97,"./nb.js":97,"./ne":98,"./ne.js":98,"./nl":99,"./nl-be":100,"./nl-be.js":100,"./nl.js":99,"./nn":101,"./nn.js":101,"./pa-in":102,"./pa-in.js":102,"./pl":103,"./pl.js":103,"./pt":104,"./pt-br":105,"./pt-br.js":105,"./pt.js":104,"./ro":106,"./ro.js":106,"./ru":107,"./ru.js":107,"./sd":108,"./sd.js":108,"./se":109,"./se.js":109,"./si":110,"./si.js":110,"./sk":111,"./sk.js":111,"./sl":112,"./sl.js":112,"./sq":113,"./sq.js":113,"./sr":114,"./sr-cyrl":115,"./sr-cyrl.js":115,"./sr.js":114,"./ss":116,"./ss.js":116,"./sv":117,"./sv.js":117,"./sw":118,"./sw.js":118,"./ta":119,"./ta.js":119,"./te":120,"./te.js":120,"./tet":121,"./tet.js":121,"./tg":122,"./tg.js":122,"./th":123,"./th.js":123,"./tl-ph":124,"./tl-ph.js":124,"./tlh":125,"./tlh.js":125,"./tr":126,"./tr.js":126,"./tzl":127,"./tzl.js":127,"./tzm":128,"./tzm-latn":129,"./tzm-latn.js":129,"./tzm.js":128,"./ug-cn":130,"./ug-cn.js":130,"./uk":131,"./uk.js":131,"./ur":132,"./ur.js":132,"./uz":133,"./uz-latn":134,"./uz-latn.js":134,"./uz.js":133,"./vi":135,"./vi.js":135,"./x-pseudo":136,"./x-pseudo.js":136,"./yo":137,"./yo.js":137,"./zh-cn":138,"./zh-cn.js":138,"./zh-hk":139,"./zh-hk.js":139,"./zh-tw":140,"./zh-tw.js":140};function a(e){var s=n(e);return t(s)}function n(e){if(!t.o(r,e)){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=n,e.exports=a,a.id=154},155:function(e,s){e.exports={users:[["Andrey Listochkin","🧔🏼"],["Dmytro Naumenko","🦄"],["Yurii But","🦐"],["Nadiia Davydiuk","🌸"],["Kostiantyn Ovsepian","🤓"],["Volodymyr Kaliuzhnyi","🤘"],["Anna Bilyavskaya","🌺"],["[meido] server error","💩"]]}},156:function(e,s,t){"use strict";t.r(s);var r=t(1),a=t(141),n=t(4),o=t(3),l=t(144);const{version:c}=t(12),i=e=>s=>(s((e=>({type:"REQUEST_ORDERS",params:e}))(e)),fetch(`api/orders/${e}`).then(e=>{return e.headers.get("version")!==c&&setTimeout(()=>window.location.reload(),6e4),e}).then(e=>e.json()).then(e=>s((e=>({type:"RECEIVE_ORDERS",workers:e,receivedAt:Date.now()}))(e)),e=>s((e=>({type:"RECEIVE_ERROR",error:e,receivedAt:Date.now()}))(e))));var d=(e={isLoading:!1,workers:[]},s)=>{switch(s.type){case"REQUEST_ORDERS":return Object.assign({},e,{isLoading:!0});case"RECEIVE_ORDERS":return Object.assign({},e,{isLoading:!1,workers:s.workers,error:null,lastUpdated:s.receivedAt});case"RECEIVE_ERROR":return Object.assign({},e,{isLoading:!1,error:s.error,lastUpdated:s.receivedAt});default:return e}},m=t(0),j=t(5),u=t.n(j);t(157);const{users:p}=t(155),h=new Map(p);class v extends r.Component{constructor(e){super(e)}getAbbr(e){const s=/(\w)\w*[\W]+(\w)\w*/;try{const[,t,r]=e.match(s);return`${t}${r}`.toLowerCase()}catch(s){return console.warn("wrong string format",e),"--"}}getAvatarColor(e){const s=e.charCodeAt(0);e.charCodeAt(1);return`hsl(${(s-97)/25*360},100%,40%)`}render(){const{worker:e}=this.props,s=(t=e.name,h.get(t));var t;const a=this.getAbbr(e.name),n=e=>{e&&e.style.setProperty("--color",this.getAvatarColor(a))};return r.createElement("div",{className:"worker fl-row"},r.createElement("div",{className:u()("avatar",{emoji:!!s,abbr:!s}),ref:e=>n(e)},s||a),r.createElement("div",{className:"fl-col"},r.createElement("div",{className:"worker__title"},r.createElement("div",{className:"worker__name"},e.name)),r.createElement("div",{className:"order"},r.createElement("div",{className:"order__name"},e.order.title))))}}const{version:b}=t(12),k=600,f=1e3*k;var g=Object(o.b)(e=>{const{workers:s,isLoading:t,lastUpdated:r,error:a}=e;return{workers:s,lastUpdated:r,isLoading:t,error:a}},e=>({fetchWorkers:s=>e(i(s))}))(class extends r.Component{constructor(){super(...arguments),this.state={timeLeft:k},this.update=()=>{this.setState(()=>({timeLeft:k})),this.props.fetchWorkers(location.search)}}componentDidMount(){this.update(),setInterval(()=>{this.setState(e=>({timeLeft:e.timeLeft-1}))},1e3),setInterval(this.update,f)}render(){const{error:e,lastUpdated:s}=this.props,t=m(s).format("ddd, MMM-D'YY HH:mm:ss");return r.createElement("div",{className:"app-info"},r.createElement("div",{className:"banner"},"🐞Issues? ",r.createElement("a",{href:"http://t.me/bobanko"},"http://t.me/bobanko")),r.createElement("div",null,"last update: ",t," "),r.createElement("div",null,r.createElement("span",null,"ver. ",b,", "),r.createElement("span",null,"status:",e?r.createElement("span",{style:{color:"red"}},e.message,"💔"):r.createElement("span",{style:{color:"limegreen"}},"online💚"))))}});t(159);class w extends r.Component{render(){return r.createElement("div",{className:u()("loader-linear",{"is-loading":this.props.isLoading})},r.createElement("div",{className:"loader-linear__track"}),r.createElement("div",{className:"loader-linear__indicator"}))}}var E=t(145);const y=["🍏","🍎","🍐","🍊","🍋","🍌","🍉","🍇","🍓","🍈","🍒","🍑","🍍","🥥","🥝","🍅","🍆","🥑","🥦","🥒","🌶️","🌽","🥕","🥔","🥐","🍞","🥖","🥨","🧀","🥚","🍳","🥞","🥓","🥩","🍗","🍖","🌭","🍔","🍟","🍕","🥪","🥙","🌮","🌯","🥗","🥘","🥫","🍝","🍜","🍲","🍛","🍣","🥟","🍤","🍚","🍦","🥧","🍰","🎂","🍮","🍭","🍫","🍿","🍩","🍪","🌰","🥜","🍯","☕️","🍵","🍺","🥣","🥡"],z=()=>Object(E.sample)(y);t(160);var O=t(7);t(161);function R(e){window.location.href=window.location.origin+`/?hash=${e}`}function N(){const e=new URL(location.href).searchParams.get("hash");e||R(O.defaultHash);const s=[...O.floors.values()].includes(e);return r.createElement("label",{className:"floor-selector"},r.createElement("span",null,"Floor"),r.createElement("select",{name:"floor",onChange:function(e){R(e.target.value)},value:s?e:""},r.createElement("option",{value:"",disabled:!0},"?"),[...O.floors].map(([e,s])=>r.createElement("option",{key:s,value:s},e))))}var x=Object(o.b)(e=>{const{workers:s,isLoading:t,error:r}=e;return{workers:s,isLoading:t,error:r}})(class extends r.Component{constructor(e){super(e)}render(){const{workers:e,isLoading:s,error:t}=this.props,a=m().format("dddd, MMMM Do, YYYY");return r.createElement("div",null,r.createElement(w,{isLoading:s}),r.createElement(g,null),r.createElement("h1",null,r.createElement(N,null),`Orders ${z()} ${a}`),r.createElement("div",{className:"workers"},e.map((e,s)=>r.createElement(v,{key:s,worker:e})),!s&&0===e.length&&r.createElement("h2",null,"No orders")))}});const L=Object(n.c)(d,Object(n.a)(l.a));a.render(r.createElement(o.a,{store:L},r.createElement(x,null)),document.getElementById("root"))},157:function(e,s){},159:function(e,s){},160:function(e,s){},161:function(e,s){},7:function(e,s){const t=new Map([[4,"wjdj1412sdasf"],[5,"wjdj1410sdadd"],[6,"12evsadba2f"],[8,"bas45143568e"]]);e.exports={serverUrl:"https://analytics.getmeido.com/media/json?hash=",defaultHash:t.get(4),floors:t}}},[[156,1,2]]]);
//# sourceMappingURL=main.9685b35e4d503bb3ea27.js.map