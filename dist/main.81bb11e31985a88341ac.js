(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{148:function(e,s,r){var t={"./af":11,"./af.js":11,"./ar":12,"./ar-dz":13,"./ar-dz.js":13,"./ar-kw":14,"./ar-kw.js":14,"./ar-ly":15,"./ar-ly.js":15,"./ar-ma":16,"./ar-ma.js":16,"./ar-sa":17,"./ar-sa.js":17,"./ar-tn":18,"./ar-tn.js":18,"./ar.js":12,"./az":19,"./az.js":19,"./be":20,"./be.js":20,"./bg":21,"./bg.js":21,"./bm":22,"./bm.js":22,"./bn":23,"./bn.js":23,"./bo":24,"./bo.js":24,"./br":25,"./br.js":25,"./bs":26,"./bs.js":26,"./ca":27,"./ca.js":27,"./cs":28,"./cs.js":28,"./cv":29,"./cv.js":29,"./cy":30,"./cy.js":30,"./da":31,"./da.js":31,"./de":32,"./de-at":33,"./de-at.js":33,"./de-ch":34,"./de-ch.js":34,"./de.js":32,"./dv":35,"./dv.js":35,"./el":36,"./el.js":36,"./en-au":37,"./en-au.js":37,"./en-ca":38,"./en-ca.js":38,"./en-gb":39,"./en-gb.js":39,"./en-ie":40,"./en-ie.js":40,"./en-il":41,"./en-il.js":41,"./en-nz":42,"./en-nz.js":42,"./eo":43,"./eo.js":43,"./es":44,"./es-do":45,"./es-do.js":45,"./es-us":46,"./es-us.js":46,"./es.js":44,"./et":47,"./et.js":47,"./eu":48,"./eu.js":48,"./fa":49,"./fa.js":49,"./fi":50,"./fi.js":50,"./fo":51,"./fo.js":51,"./fr":52,"./fr-ca":53,"./fr-ca.js":53,"./fr-ch":54,"./fr-ch.js":54,"./fr.js":52,"./fy":55,"./fy.js":55,"./gd":56,"./gd.js":56,"./gl":57,"./gl.js":57,"./gom-latn":58,"./gom-latn.js":58,"./gu":59,"./gu.js":59,"./he":60,"./he.js":60,"./hi":61,"./hi.js":61,"./hr":62,"./hr.js":62,"./hu":63,"./hu.js":63,"./hy-am":64,"./hy-am.js":64,"./id":65,"./id.js":65,"./is":66,"./is.js":66,"./it":67,"./it.js":67,"./ja":68,"./ja.js":68,"./jv":69,"./jv.js":69,"./ka":70,"./ka.js":70,"./kk":71,"./kk.js":71,"./km":72,"./km.js":72,"./kn":73,"./kn.js":73,"./ko":74,"./ko.js":74,"./ky":75,"./ky.js":75,"./lb":76,"./lb.js":76,"./lo":77,"./lo.js":77,"./lt":78,"./lt.js":78,"./lv":79,"./lv.js":79,"./me":80,"./me.js":80,"./mi":81,"./mi.js":81,"./mk":82,"./mk.js":82,"./ml":83,"./ml.js":83,"./mn":84,"./mn.js":84,"./mr":85,"./mr.js":85,"./ms":86,"./ms-my":87,"./ms-my.js":87,"./ms.js":86,"./mt":88,"./mt.js":88,"./my":89,"./my.js":89,"./nb":90,"./nb.js":90,"./ne":91,"./ne.js":91,"./nl":92,"./nl-be":93,"./nl-be.js":93,"./nl.js":92,"./nn":94,"./nn.js":94,"./pa-in":95,"./pa-in.js":95,"./pl":96,"./pl.js":96,"./pt":97,"./pt-br":98,"./pt-br.js":98,"./pt.js":97,"./ro":99,"./ro.js":99,"./ru":100,"./ru.js":100,"./sd":101,"./sd.js":101,"./se":102,"./se.js":102,"./si":103,"./si.js":103,"./sk":104,"./sk.js":104,"./sl":105,"./sl.js":105,"./sq":106,"./sq.js":106,"./sr":107,"./sr-cyrl":108,"./sr-cyrl.js":108,"./sr.js":107,"./ss":109,"./ss.js":109,"./sv":110,"./sv.js":110,"./sw":111,"./sw.js":111,"./ta":112,"./ta.js":112,"./te":113,"./te.js":113,"./tet":114,"./tet.js":114,"./tg":115,"./tg.js":115,"./th":116,"./th.js":116,"./tl-ph":117,"./tl-ph.js":117,"./tlh":118,"./tlh.js":118,"./tr":119,"./tr.js":119,"./tzl":120,"./tzl.js":120,"./tzm":121,"./tzm-latn":122,"./tzm-latn.js":122,"./tzm.js":121,"./ug-cn":123,"./ug-cn.js":123,"./uk":124,"./uk.js":124,"./ur":125,"./ur.js":125,"./uz":126,"./uz-latn":127,"./uz-latn.js":127,"./uz.js":126,"./vi":128,"./vi.js":128,"./x-pseudo":129,"./x-pseudo.js":129,"./yo":130,"./yo.js":130,"./zh-cn":131,"./zh-cn.js":131,"./zh-hk":132,"./zh-hk.js":132,"./zh-tw":133,"./zh-tw.js":133};function a(e){var s=n(e);return r(s)}function n(e){var s=t[e];if(!(s+1)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return s}a.keys=function(){return Object.keys(t)},a.resolve=n,e.exports=a,a.id=148},149:function(e,s,r){"use strict";r.r(s);var t=r(1),a=r(134),n=r(4),o=r(3),l=r(138);const{version:c}=r(9),i=e=>s=>(s((e=>({type:"REQUEST_ORDERS",params:e}))(e)),fetch(`api/orders/${e}`).then(e=>{return e.headers.get("version")!==c&&setTimeout(()=>window.location.reload(),6e4),e}).then(e=>e.json()).then(e=>s((e=>({type:"RECEIVE_ORDERS",workers:e,receivedAt:Date.now()}))(e)),e=>s((e=>({type:"RECEIVE_ERROR",error:e,receivedAt:Date.now()}))(e))));var d=(e={isLoading:!1,workers:[]},s)=>{switch(s.type){case"REQUEST_ORDERS":return Object.assign({},e,{isLoading:!0});case"RECEIVE_ORDERS":return Object.assign({},e,{isLoading:!1,workers:s.workers,error:null,lastUpdated:s.receivedAt});case"RECEIVE_ERROR":return Object.assign({},e,{isLoading:!1,error:s.error,lastUpdated:s.receivedAt});default:return e}},j=r(0);r(150);class m extends t.Component{constructor(e){super(e)}getAbbr(e){const s=/(\w)\w*[\W](\w)\w*/;try{const[,r,t]=e.match(s);return`${r}${t}`.toLowerCase()}catch(s){return console.warn("wrong string format",e),"🦄"}}getAvatarColor(e){const s=e.charCodeAt(0);e.charCodeAt(1);return`hsl(${(s-97)/25*360},100%,40%)`}render(){const{worker:e}=this.props,s=this.getAbbr(e.name),r=e=>{e&&e.style.setProperty("--color",this.getAvatarColor(s))};return t.createElement("div",{className:"worker fl-row"},t.createElement("div",{className:"av",ref:e=>r(e)},s),t.createElement("div",{className:"fl-col"},t.createElement("div",{className:"worker__title"},t.createElement("div",{className:"worker__name"},e.name)),t.createElement("div",{className:"order"},t.createElement("div",{className:"order__name"},e.order.title))))}}const{version:p}=r(9),u=600,h=1e3*u;var v=Object(o.b)(e=>{const{workers:s,isLoading:r,lastUpdated:t,error:a}=e;return{workers:s,lastUpdated:t,isLoading:r,error:a}},e=>({fetchWorkers:s=>e(i(s))}))(class extends t.Component{constructor(){super(...arguments),this.state={timeLeft:u},this.update=(()=>{this.setState(()=>({timeLeft:u})),this.props.fetchWorkers(location.search)})}componentDidMount(){this.update(),setInterval(()=>{this.setState(e=>({timeLeft:e.timeLeft-1}))},1e3),setInterval(this.update,h)}render(){const{error:e,lastUpdated:s}=this.props,r=j(s).format("ddd, MMM-D'YY HH:mm:ss");return t.createElement("div",{className:"app-info"},t.createElement("div",null,"last update: ",r," "),t.createElement("div",null,"status:",e?t.createElement("span",{style:{color:"red"}},e.message,"💔"):t.createElement("span",{style:{color:"limegreen"}},"online💚")),t.createElement("div",null,"ver. ",p))}}),k=r(139),b=r.n(k);r(152);class g extends t.Component{render(){return t.createElement("div",{className:b()("loader-linear",{"is-loading":this.props.isLoading})},t.createElement("div",{className:"loader-linear__track"}),t.createElement("div",{className:"loader-linear__indicator"}))}}var w=r(140);const E=["🍏","🍎","🍐","🍊","🍋","🍌","🍉","🍇","🍓","🍈","🍒","🍑","🍍","🥥","🥝","🍅","🍆","🥑","🥦","🥒","🌶","🌽","🥕","🥔","🥐","🍞","🥖","🥨","🧀","🥚","🍳","🥞","🥓","🥩","🍗","🍖","🌭","🍔","🍟","🍕","🥪","🥙","🌮","🌯","🥗","🥘","🥫","🍝","🍜","🍲","🍛","🍣","🥟","🍤","🍚","🍦","🥧","🍰","🎂","🍮","🍭","🍫","🍿","🍩","🍪","🌰","🥜","🍯","☕️","🍵","🍺","🥣","🥡"],f=()=>Object(w.sample)(E);r(153);var y=Object(o.b)(e=>{const{workers:s,isLoading:r,error:t}=e;return{workers:s,isLoading:r,error:t}})(class extends t.Component{constructor(e){super(e)}render(){const{workers:e,isLoading:s,error:r}=this.props,a=j().format("dddd, MMMM Do, YYYY");return t.createElement("div",null,t.createElement(g,{isLoading:s}),t.createElement(v,null),t.createElement("h1",null,f(),"Orders for ",a),t.createElement("div",{className:"workers"},e.map((e,s)=>t.createElement(m,{key:s,worker:e})),!s&&0===e.length&&t.createElement("h2",null,"No orders")))}});const z=Object(n.c)(d,Object(n.a)(l.a));a.render(t.createElement(o.a,{store:z},t.createElement(y,null)),document.getElementById("root"))},150:function(e,s){},152:function(e,s){},153:function(e,s){},9:function(e){e.exports={name:"meido-orders",version:"1.0.12",private:!0,engines:{node:"8.9.4"},scripts:{start:"node server",dev:"webpack --watch",server:"node server",devserver:"webpack-dev-server --mode development --open",build:"webpack --mode production",release:"npm version patch -f && npm run build && git add -A dist && git commit --amend --no-edit"},repository:{type:"git",url:"git+https://github.com/bobanko/wix-meido-order-list.git"},devDependencies:{"awesome-typescript-loader":"^5.2.1","clean-webpack-plugin":"^0.1.19","copy-webpack-plugin":"^4.5.2","css-loader":"^1.0.0","extract-text-webpack-plugin":"^4.0.0-beta.0","file-loader":"^2.0.0","html-webpack-plugin":"^3.2.0","node-sass":"^4.9.3",path:"^0.12.7","redux-devtools":"^3.4.1","sass-loader":"^7.1.0","source-map-loader":"^0.2.4","ts-loader":"^5.0.0",typescript:"^3.0.3",webpack:"^4.19.1","webpack-cli":"^3.1.1","webpack-dev-server":"^3.1.7"},dependencies:{"@types/lodash":"^4.14.110","@types/react":"^16.4.13","@types/react-dom":"^16.0.7",classnames:"^2.2.6",express:"^3.1.2",lodash:"^4.17.11",moment:"^2.22.2",npm:"^6.4.1",react:"^16.5.0","react-dom":"^16.5.0","react-redux":"^5.0.7",redux:"^4.0.0","redux-logger":"^3.0.6","redux-thunk":"^2.3.0",request:"^2.88.0"}}}},[[149,2,1]]]);
//# sourceMappingURL=main.81bb11e31985a88341ac.js.map